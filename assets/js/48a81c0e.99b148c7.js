"use strict";(self.webpackChunkmeta_erlang_github_io=self.webpackChunkmeta_erlang_github_io||[]).push([[9397],{8895:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>b});var a=r(4848),t=r(8453);const i={sidebar_position:2,description:"bitbake classes to support recipes."},l="Bitbake classes",n={id:"guides/guides-bitbake-classes",title:"Bitbake classes",description:"bitbake classes to support recipes.",source:"@site/versioned_docs/version-scarthgap/guides/guides-bitbake-classes.md",sourceDirName:"guides",slug:"/guides/guides-bitbake-classes",permalink:"/docs/scarthgap/guides/guides-bitbake-classes",draft:!1,unlisted:!1,editUrl:"https://github.com/meta-erlang/meta-erlang.github.io/tree/master/versioned_docs/version-scarthgap/guides/guides-bitbake-classes.md",tags:[],version:"scarthgap",sidebarPosition:2,frontMatter:{sidebar_position:2,description:"bitbake classes to support recipes."},sidebar:"tutorialSidebar",previous:{title:"A tiny recipe",permalink:"/docs/scarthgap/guides/guides-a-tiny-recipe"},next:{title:"My application example",permalink:"/docs/scarthgap/guides/guides-my-application"}},c={},b=[{value:"rebar3.bbclass",id:"rebar3bbclass",level:2},{value:"rebar3-brokensep.bbclass",id:"rebar3-brokensepbbclass",level:2},{value:"rebar.bbclass",id:"rebarbbclass",level:2},{value:"mix.bbclass",id:"mixbbclass",level:2},{value:"mix-phoenix.bbclass",id:"mix-phoenixbbclass",level:2},{value:"mix-rebar3.bbclass",id:"mix-rebar3bbclass",level:2},{value:"mix-rustler.bbclass",id:"mix-rustlerbbclass",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"bitbake-classes",children:"Bitbake classes"})}),"\n",(0,a.jsx)(s.p,{children:"The meta-erlang layer provides additional bitbake classes to handle and help\nmaking releases for Erlang and Elixir applications."}),"\n",(0,a.jsx)(s.h2,{id:"rebar3bbclass",children:"rebar3.bbclass"}),"\n",(0,a.jsxs)(s.p,{children:["The\n",(0,a.jsx)(s.a,{href:"https://github.com/meta-erlang/meta-erlang/blob/master/classes/rebar3.bbclass",children:"rebar3.bbclass"}),"\nexports the following environment variables:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"REBAR3_TARGET_INCLUDE_ERTS"}),", target include ERTS path"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"REBAR3_TARGET_SYSTEM_LIBS"}),", target system ERTS path"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"ERLANG_ERTS"}),", the version of ERTS"]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"When configuring rebar3 to use the above variables, rebar3 can find the correct\nERTS to make a proper release."}),"\n",(0,a.jsx)(s.h2,{id:"rebar3-brokensepbbclass",children:"rebar3-brokensep.bbclass"}),"\n",(0,a.jsxs)(s.p,{children:["Supports brokensep projects, that is the project builds with\n",(0,a.jsx)(s.a,{href:"https://docs.yoctoproject.org/ref-manual/variables.html#term-B",children:"B"})," ==\n",(0,a.jsx)(s.a,{href:"https://docs.yoctoproject.org/ref-manual/variables.html#term-S",children:"S"}),". See\nadditional details for brokensep context\n",(0,a.jsx)(s.a,{href:"https://docs.yoctoproject.org/ref-manual/classes.html?highlight=brokensep#autotools-bbclass",children:"here"}),"."]}),"\n",(0,a.jsx)(s.h2,{id:"rebarbbclass",children:"rebar.bbclass"}),"\n",(0,a.jsxs)(s.p,{children:["Legacy and deprecated rebar2 support throught\n",(0,a.jsx)(s.a,{href:"https://github.com/meta-erlang/meta-erlang/blob/master/classes/rebar.bbclass",children:"rebar.bbclass"}),"."]}),"\n",(0,a.jsx)(s.h2,{id:"mixbbclass",children:"mix.bbclass"}),"\n",(0,a.jsxs)(s.p,{children:["The\n",(0,a.jsx)(s.a,{href:"https://github.com/meta-erlang/meta-erlang/blob/master/classes/mix.bbclass",children:"mix.bbclass"}),"\nexports the following environment variables:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"MIX_TARGET_INCLUDE_ERTS"}),", target include ERTS path"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"MIX_ENV"}),", the default value is ",(0,a.jsx)(s.code,{children:"prod"})]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"mix-phoenixbbclass",children:"mix-phoenix.bbclass"}),"\n",(0,a.jsxs)(s.p,{children:["The\n",(0,a.jsx)(s.a,{href:"https://github.com/meta-erlang/meta-erlang/blob/master/classes/mix-phoenix.bbclass",children:"mix-phoenix.bbclass"}),"\nappends addional steps in order to make\n",(0,a.jsx)(s.a,{href:"https://hexdocs.pm/phoenix/releases.html",children:"Phoenix releases"}),". Also adds\n",(0,a.jsx)(s.code,{children:"nodejs-native"})," as DEPENDS variable."]}),"\n",(0,a.jsx)(s.h2,{id:"mix-rebar3bbclass",children:"mix-rebar3.bbclass"}),"\n",(0,a.jsxs)(s.p,{children:["Instead of letting mix tool fetching rebar3 binary, the class\n",(0,a.jsx)(s.a,{href:"https://github.com/meta-erlang/meta-erlang/blob/master/classes/mix-rebar3.bbclass",children:"mix-rebar3.bbclass"}),"\nconfigures the variable MIX_REBAR3 pointing it to the rebar3 binary from\n",(0,a.jsx)(s.code,{children:"rebar3-native"})," recipe."]}),"\n",(0,a.jsx)(s.h2,{id:"mix-rustlerbbclass",children:"mix-rustler.bbclass"}),"\n",(0,a.jsxs)(s.p,{children:["Supports building Elixir projects that uses Erlang NIFs written in Rust\nlanguage. The class\n",(0,a.jsx)(s.a,{href:"https://github.com/meta-erlang/meta-erlang/blob/master/classes/mix-rustler.bbclass",children:"mix-rustler.bbclass"}),"\nexports the variable ",(0,a.jsx)(s.code,{children:"RUST_TARGET"})," with the correct Rust target triple. An\nexample getting the correct target triple from the environment is shown here:\n",(0,a.jsx)(s.a,{href:"https://github.com/meta-erlang/hello-world/blob/master/hello-elixir-rustler/lib/hello_elixir_rustler/rustler_nif.ex",children:"rustler_nifi.ex"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>l,x:()=>n});var a=r(6540);const t={},i=a.createContext(t);function l(e){const s=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function n(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);