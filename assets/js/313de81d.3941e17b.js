"use strict";(self.webpackChunkmeta_erlang_github_io=self.webpackChunkmeta_erlang_github_io||[]).push([[5258],{31434:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"examples","title":"Examples","description":"Start livebook from beamtools","source":"@site/beamtools/3-examples.mdx","sourceDirName":".","slug":"/examples","permalink":"/beamtools/examples","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Jo\xe3o Henrique Ferreira de Freitas","lastUpdatedAt":1767386978000,"sidebarPosition":3,"frontMatter":{},"sidebar":"beamtools","previous":{"title":"Downloading and installing a pre-built beamtools tarball","permalink":"/beamtools/installation"}}');var l=s(74848),i=s(28453);const t={},a="Examples",o={},d=[{value:"Start livebook from beamtools",id:"start-livebook-from-beamtools",level:2},{value:"Building and starting erlang-red application",id:"building-and-starting-erlang-red-application",level:2},{value:"Building observer_cli",id:"building-observer_cli",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"examples",children:"Examples"})}),"\n",(0,l.jsx)(n.h2,{id:"start-livebook-from-beamtools",children:"Start livebook from beamtools"}),"\n",(0,l.jsx)(n.p,{children:"As livebook is included into standard beamtools SDK, it's possible to start a\nlivebook session easily following the steps below:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Source the beamtools SDK"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"source /home/your_username/beamtools/environment-setup-x86_64-pokysdk-linux\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Check if the livebook scripts exists in your environment:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'$ livebook\nUsage: livebook COMMAND [ARGS]\n\nThe known commands are:\n\nstart          Starts the system\nstart_iex      Starts the system with IEx attached\ndaemon         Starts the system as a daemon\ndaemon_iex     Starts the system as a daemon with IEx attached\neval "EXPR"    Executes the given expression on a new, non-booted system\nrpc "EXPR"     Executes the given expression remotely on the running system\nremote         Connects to the running system via a remote shell\nrestart        Restarts the running system via a remote command\nstop           Stops the running system via a remote command\npid            Prints the operating system PID of the running system via a remote command\nversion        Prints the release name and version to be booted\n\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Start livebook system:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ livebook start\n[Livebook] Application running at http://localhost:8080/?token=z4nrl62iqojkttdq3fuha7vm7ynkhwis\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"It's done, you can play with livebook locally without need to install\nanything else."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"building-and-starting-erlang-red-application",children:"Building and starting erlang-red application"}),"\n",(0,l.jsx)(n.p,{children:"Let's try erlang-red application building it from source code."}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Source the beamtools SDK"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"source /home/your_username/beamtools/environment-setup-x86_64-pokysdk-linux\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Fetch erlang-red source code:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/gorenje/erlang-red\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Next, it is time to build erlang-red which is a rebar3 project:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'cd erlang-red\nexport ERL_CFLAGS="-I${ERL_EI_INCLUDE_DIR} -I${ERL_ERTS_INCLUDE_DIR}"\nrebar3 compile\n'})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.em,{children:"ERL_CFLAGS"})," exported variable is needed in order to indicate the right place where Erlang headers can be find.\nFor erlang-red context, the library circuits_i2c needs that includes. And beamtools already exports two variables (ERL_EI_INCLUDE_DIR and ERL_ERTS_INCLUDE_DIR) to help with this ERL_CFLAGS variable."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Run erlang-red using rebar3 shell:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"rebar3 shell --apps erlang_red\n===> Verifying dependencies...\n===> Analyzing applications...\n===> Compiling erlang_red\nErlang/OTP 28 [erts-16.0.3] [source] [64-bit] [smp:12:12] [ds:12:12:10] [async-threads:1] [jit:ns]\n\nEshell V16.0.3 (press Ctrl+G to abort, type help(). for help)\n===> Booted cowlib\n\n===> Booted ranch\n\n===> Booted cowboy\n\n===> Booted circuits_i2c\n\n===> Booted erlang_red_parsers\n\n===> Booted erlang_red\n\n1>\n"})}),"\n",(0,l.jsxs)(n.p,{children:["And check the results at ",(0,l.jsx)(n.a,{href:"http://localhost:8080/erlang-red",children:"http://localhost:8080/erlang-red"})]}),"\n",(0,l.jsx)(n.p,{children:"If you want to change the default 8080 tcp port, use the environment variable PORT to change it."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"As a last step, let's also make an erlang-red release:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"rebar3 release\n===> Verifying dependencies...\n===> Analyzing applications...\n===> Compiling erlang_red\n===> Assembling release erlang_red-0.3.4...\n===> There are missing function calls in the release.\n===> Make sure all applications needed at runtime are included in the release.\n===> ered_http_release_status:handle_get_response/2 calls undefined function status_tmpl:render/1\n===> Release successfully assembled: _build/default/rel/erlang_red\n"})}),"\n",(0,l.jsx)(n.p,{children:"The folder _build/default/rel/erlang_red has an erlang-red release with everything needed in order to run erlang-red."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"building-observer_cli",children:"Building observer_cli"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://github.com/zhongwencool/observer_cli",children:"observer_cli"})," is an application for visualizing Erlang/Elixir nodes on the\ncommand line."]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Source the beamtools SDK"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"source /home/your_username/beamtools/environment-setup-x86_64-pokysdk-linux\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Fetch observer_cli source code:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/zhongwencool/observer_cli\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Build it:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"rebar3 escriptize\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Produces a escript file at ",(0,l.jsx)(n.code,{children:"_build/default/bin/observer_cli"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Try to run observer_cli:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"_build/default/bin/observer_cli\nUsage: observer_cli TARGETNODE [TARGETCOOKIE REFRESHMS]\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var r=s(96540);const l={},i=r.createContext(l);function t(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);